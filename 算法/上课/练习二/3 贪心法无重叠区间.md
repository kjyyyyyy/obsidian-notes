![[Pasted image 20250520151040.png]]
### **第三题：贪心算法——无重叠区间**  
#### **题型套路总结**  
1. **贪心策略核心模板**  
   - **排序**：按结束时间（或起始时间）排序。  
   - **选择**：每次选择最早结束的区间（局部最优解）。  
   - **剪枝**：跳过与当前选择冲突的区间（即重叠区间）。  
   - **终止条件**：遍历完所有区间。  

2. **关键特性**  
   - **贪心选择性**：选择最早结束的区间，为后续保留更多空间。  
   - **最优子结构**：当前选择后的剩余问题仍为原问题的子问题。  

3. **时间复杂度**  
   - 排序时间 `O(n log n)`，遍历时间 `O(n)`，总复杂度 `O(n log n)`。  

---

#### **代码记忆技巧**  
**Python 实现**  
```python
def eraseOverlapIntervals(intervals):
    if not intervals:
        return 0
    # 按结束时间排序（关键步骤）
    intervals.sort(key=lambda x: x[1])
    count = 1  # 第一个区间必选
    end = intervals[0][1]  # 当前区间的结束时间
    for interval in intervals[1:]:
        if interval[0] >= end:  # 不重叠（剪枝条件）
            count += 1
            end = interval[1]  # 更新结束时间
    return len(intervals) - count  # 返回需要移除的区间数
```

**关键代码点**  
- **排序**：`intervals.sort(key=lambda x: x[1])` → 按结束时间升序排列。  
- **剪枝条件**：`interval[0] >= end` → 当前区间起始时间 ≥ 上一区间的结束时间（无重叠）。  
- **计数逻辑**：`count` 记录最多能选的不重叠区间数，最终结果为 `总区间数 - count`。  

---

#### **正确性分析**  
1. **贪心选择的正确性**  
   - 假设存在一个最优解未选择最早结束的区间，则可以通过替换为最早结束的区间来构造另一个更优的解，矛盾。  
   - 例如：若最优解包含区间 `[1,4]`，而存在一个更早结束的区间 `[1,2]`，则替换后剩余空间更大，可容纳更多区间。  

2. **最优子结构**  
   - 选择最早结束的区间后，剩余问题（后续区间的选择）仍为原问题的子问题。  

---

#### **常见错误与避坑**  
- **错误1：排序方式错误**  
  - 若按起始时间排序，可能无法覆盖最优解（如 `[1,3], [2,4], [5,6]` 中，选 `[1,3]` 会漏掉 `[2,4]`）。  
  - **解决**：严格按结束时间排序。  

- **错误2：剪枝条件写反**  
  - 若误写为 `interval[0] > end`，会漏掉起始时间等于上一区间结束时间的合法区间（如 `[1,2]` 和 `[2,3]` 应视为不重叠）。  
  - **解决**：使用 `>=` 而非 `>`。  

- **错误3：忽略空输入检查**  
  - 若输入为空数组，直接返回 `0`，否则会触发异常。  
  - **解决**：添加 `if not intervals: return 0`。  

---

#### **模拟示例**  
**输入**：`intervals = [[1,2],[2,3],[1,3],[3,4]]`  
1. 排序后：`[[1,2],[2,3],[1,3],[3,4]]`  
2. 初始选择 `[1,2]`，`end=2`  
3. 下一区间 `[2,3]` 起始时间 `2 >= end=2` → 选择，`end=3`  
4. 区间 `[1,3]` 起始时间 `1 < end=3` → 跳过  
5. 最终 `count=2`，需移除 `4-2=2` 个区间  

---

#### **举一反三**  
- **同类问题**：活动选择问题（LeetCode 435）、区间调度问题。  
- **变体套路**：  
  - 若要求返回最大不重叠区间集合 → 记录选中的区间索引。  
  - 若需最小化重叠区间的数量 → 调整剪枝条件（如允许部分重叠）。  

**记住口诀**：  
**“贪心排序按结束，剪枝条件看起始；局部最优全局解，重叠区间去无效。”**